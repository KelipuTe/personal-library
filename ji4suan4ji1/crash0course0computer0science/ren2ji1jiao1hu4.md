## 人机交互

- 2021-11-10
- 22、命令行界面-Keyboards and Command Line Interfaces
- 23、屏幕和2D图形显示-Screens and 2D Graphics
- 26、图形用户界面-Graphical User Interfaces
- 27、3D图形-3D Graphics

### 命令行界面

早期计算机是通过齿轮、旋钮、开关等机械结构来输入输出的，这就是最基础的交互界面。那个时代的特点是，尽可能迁就机器，对人类好不好是其次。

早期的命令行界面是电传交互，人的输入和计算机的输出都通过电传打字机打印出来实现。随着处理器和屏幕的发展，使得用屏幕替代电传打字机变得可行，称之为虚拟电传打字机或者终端。后来屏幕就成为了标配。

这个时间出现了最早的游戏，即文字冒险游戏。

### 屏幕和2D图形显示

#### 阴极射线管

将电子发射到有磷光体涂层的屏幕上，当电子撞击涂层时，会发光几分之一秒。由于电子是带电粒子，所以路径可以由磁场控制。

有两种方法绘制图形。第一种是引导电子束描绘出形状，这叫矢量扫描，如果重复的足够快，就可以得到清晰的图像。第二种是，按固定路径一行一行来，不断重复，这叫光栅扫描。

#### 字符生成器

字符生成器从内存读取数据，转换成光栅图形，可以算是第一代显卡。

为了显示，字符生成器会访问内存中一块特殊的区域，这块区域转为图形保留，也叫屏幕缓冲区。

#### 矢量图形

矢量图形用线描述图形，图形中所有的东西都是用线表示的，包括文字。

最早的到画面的游戏用的就是用矢量图形。

#### 显示器

最早的显示器，用内存直接对应屏幕上的像素，图形就是一个巨大的像素矩阵，这叫位图显示。

### 图形用户界面

1964年，鼠标设备，通过设备在屏幕上移动光标

1968年，现代图形界面原型，鼠标，多窗口

1973年，施乐奥托，桌面，窗口，图标

1981年，施乐奥托，桌面隐喻

1995年，Windows 95，开始菜单、任务栏、文件管理器

### 3D图形

#### 3D投影

通过图形算法，把3D坐标平“拍平”，显示到2D屏幕上。

#### 线框渲染

当所有的点都从3D转成2D之后，就可以用画2D线段的函数，连接这些点

#### 正交投影

立方体的各边，在投影中互相平行。

#### 透视投射

立方体的各边，在投影中会在远处收敛于一点。

对应现实世界中，平行线会在远处收敛于一点。

#### 网格

在3D图形学中，叫三角形多边形，一堆多边形的集合叫网格。

三角形在3D图形学中更常用，是因为三角形能定义平面。

网格越密，表面越光滑，细节越多，但也意味着更多的计算量。

#### 扫描线算法

这里以三角形为例。

先铺一层像素网络，然后找出三角形最大纵坐标和最小纵坐标，只需要在这个范围内工作。

然后算法从上往下，一次处理一行，计算每一行和三角形相交的两个点，然后填充这两个点之间的像素。

当然，这样的三角形比较丑，边缘满是锯齿。

#### 抗锯齿

每个像素不都涂成一样的颜色，可以通过判断多边形切过像素的程度，来调整颜色。

如果像素在多边形内部，就直接涂色；如果多边形划过像素，颜色就浅一点。这种边缘羽化的效果，看着更舒服一些。

#### 遮挡

在3D场景中，多边形到处都是，但只有一部分能看见，其他的会被挡住。

最直接的处理办法是，画家算法，把多边形从远到近排序，从远到近渲染，想画家画画一样。

还有一种方法叫深度缓冲，通过给多边形设置深度值，来判断哪个多边形的像素在上面。当两个图形重叠的部分深度值一样的时候，最终显示哪个，是看算法怎么算浮点数的，不可控，就会出现重叠的部分一直闪的情况。

#### 背面剔除

3D游戏中的一个优化方法。比如，游戏角色的头部或者地面，都只能看到朝外的一面。所以为了节省处理时间，会忽略多边形的背面，可以减少一半的多边形面数。

#### 明暗处理

在3D场景中，物体表面应该有明暗变化。

物体上不同的多边形，不都平行于屏幕，而是有不同的方向。这些多边形面对的方向叫表面法线。

根据光源和多边形表面法线的角度，进行不同的明暗渲染，这叫平面着色，是最基本的照明算法。

平面着色算法渲染出来的效果，使多边形的边界非常明显，看起来不光滑。有更多算法解决这些问题，比如：高洛德着色、冯氏着色。

#### 纹理

纹理在图形学中只外观，而不是手感。

最简单的是纹理映射，纹理算法会查询纹理，从相应区域取平均颜色，然后填充多边形。

#### 渲染速度

提升渲染速度的方式有：为特定的运算做专门的硬件、把大场景拆分，然后并行处理。

CPU不是为此设计的，因此图形运算不快，工程师为图形设计了专门的处理器，叫图形处理单元（GPU）。
