### 改善代码质量的20条编程规范

代码风格没有对错和优劣之分，只要能在团队、项目中统一即可，不过，最好能跟业内推荐的风格、开源项目的代码风格相一致。

命名的一个原则就是以能准确达意为目标。在足够表达其含义的情况下，命名越短越好。

对于作用域比较小的变量，我们可以使用相对短的命名，比如一些函数内的临时变量。相反，对于类名这种作用域比较大的，我更推荐用长的命名方式。

利用上下文简化命名。我们可以借助类的信息来简化属性、函数的命名，利用函数的信息来简化函数参数的命名。

命名要可读、可搜索。不要使用生僻的、不好读的英文单词来命名。除此之外，命名要符合项目的统一规范，不要用些反直觉的命名。

统一规约是很重要的，能减少很多不必要的麻烦。

命名很重要，注释跟命名同等重要。命名再好，毕竟有长度限制，不可能足够详尽，而这个时候，注释就是一个很好的补充。

注释的内容主要包含这样三个方面：做什么、为什么、怎么做。对于一些复杂的类和接口，我们可能还需要写明如何用。

关于具体的代码实现思路，我们可以写一些总结性的说明、特殊情况的说明。这样能够让阅读代码的人通过注释就能大概了解代码的实现思路，阅读起来就会更加容易。

注释本身有一定的维护成本，所以并非越多越好。

类或函数的代码行数不能太多，但也不能太少。类或函数的代码行数太多，一个类上千行，一个函数几百行，逻辑过于繁杂。相反，类或函数的代码行数太少，在代码总量相同的情况下，被分割成的类和函数就会相应增多，调用关系就会变得更复杂。

一行代码最长不能超过IDE显示的宽度，太长不利于代码的阅读。但是代码长度限制如果太小，语句被折成两行，也会影响到代码的整洁，不利于阅读。

对于比较长的函数，如果逻辑上可以分为几个独立的代码块，在不方便将这些独立的代码块抽取成小函数的情况下，为了让逻辑更加清晰，可以使用空行来分割各个代码块。

在类的成员变量与函数之间、静态成员变量与普通成员变量之间、各函数之间、甚至各成员变量之间，可以通过添加空行的方式，让这些不同模块的代码之间，界限更加明确。

关于四格缩进和两格缩进，比较推荐使用两格缩进，这样可以节省空间。特别是在代码嵌套层次比较深的情况下，累计缩进较多的话，容易导致一个语句被折成两行，影响代码可读性。值得强调的是，不管是用两格缩进还是四格缩进，一定不要用Tab键缩进。因为在不同的IDE下，Tab键的显示宽度不同，有的显示为四格缩进，有的显示为两格缩进。

大括号放到跟语句同一行可以节省代码行数。将大括号另起新的一行的方式，左右括号可以垂直对齐，哪些代码属于哪一个代码块，更一目了然。

类中成员的排列顺序，类中先写成员变量后写函数。成员变量之间或函数之间，先写静态成员变量或函数，后写普通变量或函数，并且按照作用域大小依次排列。

避免函数参数过多，参数过多会影响到代码的可读性，使用起来也不方便。

不要在函数中使用布尔类型的标识参数来控制内部逻辑，true的时候走这块逻辑，false的时候走另一块逻辑。这明显违背了单一职责原则和接口隔离原则。建议将其拆成两个函数，可读性上也要更好。不过，如果函数是私有函数，影响范围有限，或者拆分之后的两个函数经常同时被调用，我们可以酌情考虑保留标识参数。

除了布尔类型作为标识参数来控制逻辑的情况外，还有一种根据参数是否为null来控制逻辑的情况。针对这种情况，我们也应该将其拆分成多个函数。拆分之后的函数职责更明确，不容易用错。

单一职责原则，针对的是类、模块这样的应用对象。实际上，对于函数的设计来说，更要满足单一职责原则。相对于类和模块，函数的粒度比较小，代码行数少，所以在应用单一职责原则的时候，没有像应用到类或者模块那样模棱两可，能多单一就多单一。

嵌套最好不超过两层，超过两层之后就要思考一下是否可以减少嵌套，移除过深的嵌套层次。代码嵌套层次过深往往是因为if-else、switch-case、for循环过度嵌套导致的。过深的嵌套本身理解起来就比较费劲，除此之外，嵌套过深很容易因为代码多次缩进，导致嵌套内部的语句超过一行的长度而折成两行，影响代码的整洁。

学会使用解释性变量：使用常量取代魔法数字；使用解释性变量来解释复杂表达式。