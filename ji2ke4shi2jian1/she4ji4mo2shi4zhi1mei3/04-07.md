### 04面向对象

面向对象编程的英文缩写是OOP，全称是ObjectOrientedProgramming。对应地，面向对象编程语言的英文缩写是OOPL，全称是ObjectOrientedProgrammingLanguage。

面向对象编程是一种编程范式或编程风格。它以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石。

面向对象编程语言是支持类或对象的语法机制，并有现成的语法机制，能方便地实现面向对象编程四大特性（封装、抽象、继承、多态）的编程语言。

不用面向对象编程语言，照样可以进行面向对象编程。反过来讲，即便使用面向对象编程语言，写出来的代码也不一定是面向对象编程风格的。

面向对象分析英文缩写是OOA，全称是ObjectOrientedAnalysis；面向对象设计的英文缩写是OOD，全称是ObjectOrientedDesign。OOA、OOD、OOP三个连在一起就是面向对象分析、设计、编程（实现），正好是面向对象软件开发要经历的三个阶段。

统一建模语言UML（UnifiedModelLanguage）。UML本身的学习成本很高，而且对于不熟悉的人来说，即便是完全按照UML规范画类图，要看懂的成本也还是很高。所以使用UML的时候可以分场景：小团队人少，能够达意，方便沟通就够了；大团队人多，越规范越好。本质是方便更清晰地理解设计。

### 05封装、抽象、继承、多态

**封装**

封装也叫作信息隐藏或者数据访问保护。封装需要编程语言本身提供访问权限控制来支持。类通过暴露有限的访问接口，授权外部仅能通过类提供的函数来访问内部信息或者数据。

封装特性存在的意义，一方面是保护数据不被随意修改，提高代码的可维护性；另一方面是仅暴露有限的必要接口，提高类的易用性。

如果对类中属性的访问不做限制，那任何代码都可以访问、修改类中的属性，虽然这样看起来更加灵活，但从另一方面来说，过度灵活也意味着不可控，属性可以随意被以各种方式修改，而且修改逻辑可能散落在代码中的各个角落，势必影响代码的可读性、可维护性。将属性封装起来，暴露少许的几个必要的方法给调用者使用，调用者就不需要了解太多背后的业务细节，用错的概率就减少很多。

**抽象**

抽象讲的是如何隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的。在面向对象编程中，常借助编程语言提供的接口类或者抽象类这两种语法机制，来实现抽象这一特性。

抽象存在的意义，一方面是提高代码的可扩展性、维护性，修改实现不需要改变定义，减少代码的改动范围；另一方面，它也是处理复杂系统的有效手段，能有效地过滤掉不必要关注的信息。

抽象这个概念是一个非常通用的设计思想，并不单单用在面向对象编程中，也可以用来指导架构设计等。在面对复杂系统的时候，人脑能承受的信息复杂程度是有限的，所以必须忽略掉一些非关键性的实现细节。而抽象作为一种只关注功能点不关注实现的设计思路，正好帮大脑过滤掉许多非必要的信息。

抽象作为一个非常宽泛的设计思想，在代码设计中，起到非常重要的指导作用。很多设计原则都体现了抽象这种设计思想。比如，在定义类的方法的时候，也要有抽象思维，不要在方法定义中，暴露太多的实现细节，以保证在某个时间点需要改变方法的实现逻辑的时候，不用去修改其定义。

**继承**

继承最大的一个好处就是代码复用。假如两个类有一些相同的属性和方法，我们就可以将这些相同的部分，抽取到父类中，让两个子类继承父类。这样，就可以避免代码重复写多遍。不过，过度使用继承，继承层次过深过复杂，就会导致代码可读性、可维护性变差。

为了实现继承这个特性，编程语言需要提供特殊的语法机制来支持。有些编程语言只支持单继承，不支持多重继承，比如Java、PHP、C#、Ruby等，而有些编程语言既支持单重继承，也支持多重继承，比如C++、Python等。

我们也可以通过利用组合关系而不是继承关系来解决代码复用的问题。

**多态**

多态是指，子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。多态特性能提高代码的可扩展性和复用性，是很多设计模式、设计原则、编程技巧的代码实现基础。

多态特性的实现方式有三种，第一种是利用继承加方法重写，第二种是利用接口类语法，第三种是利用duck-typing语法。不过，并不是每种编程语言都支持接口类或者duck-typing这两种语法机制，比如C++就不支持接口类语法，而duck-typing只有一些动态语言才支持，比如Python、JavaScript等。

### 06面向对象相比面向过程

**OOP更加能够应对大规模复杂程序的开发。**

对于简单程序的开发来说，因为需求足够简单，整个程序的处理流程只有一条主线，很容易被划分成顺序执行的几个步骤，然后逐句翻译成代码，这就非常适合采用面向过程这种面条式的编程风格来实现。但对于大规模复杂程序的开发来说，整个程序的处理流程错综复杂，并非只有一条主线，而会是一个网状结构。如果用面向过程编程这种流程化、线性的思维方式，去翻译这个网状结构，去思考如何把程序拆解为一组顺序执行的方法，就会比较吃力。

**OOP风格的代码更易复用、易扩展、易维护。**

面向过程编程是一种非常简单的编程风格，并没有像面向对象编程那样提供丰富的特性。而面向对象编程提供的封装、抽象、继承、多态这些特性，能极大地满足复杂的编程需求，能方便我们写出更易复用、易扩展、易维护的代码。

**OOP语言更加人性化、更加高级、更加智能。**

跟二进制指令、汇编语言、面向过程编程语言相比，面向对象编程语言的编程套路、思考问题的方式，是完全不一样的。前三者是一种计算机思维方式，而面向对象是一种人类的思维方式。可以这么说，越高级的编程语言离机器越远，离我们人类越近，越智能。

在用前面三种语言编程的时候，是在思考，如何设计一组指令，告诉机器去执行这组指令，操作某些数据，完成某个任务。而在进行面向对象编程时候，是在思考，如何给业务建模，如何将真实的世界映射为类或者对象，更加聚焦到业务本身，而不是思考如何跟机器打交道。

### 07看似是面向对象，实际是面向过程

我们在进行面向对象编程的时候，很容易不由自主地就写出面向过程风格的代码。因为面向过程编程风格恰恰符合人的这种流程化思维方式，而面向对象编程风格正好相反。

写出面向过程风格的代码。有些是有意为之，并无不妥；而有些是无意为之，会影响到代码的质量。有时候，从表面上看似是面向对象编程风格的代码，从本质上看却是面向过程编程风格的。

**滥用getter、setter方法。**

面向对象封装的定义是：通过访问权限控制，隐藏内部数据，外部仅能通过类提供的有限的接口访问、修改内部数据。所以，暴露不应该暴露的setter方法，明显违反了面向对象的封装特性。

**滥用全局变量和全局方法。**

常见的全局变量有单例类对象、静态成员变量、常量等，常见的全局方法有静态方法。全局变量和全局方法，会影响代码的可维护性，会增加代码的编译时间，会影响代码的复用性。

但是全局变量和全局方法在软件开发中还是挺有用的，能解决代码复用问题。所以，并不是说完全不能用，而是说，要尽量避免滥用，不要不加思考地随意去定义。

**定义数据和方法分离的类。**

基于MVC三层结构做Web方面的后端开发，就是典型的面向过程的编程风格。实际上，这种开发模式叫作基于贫血模型的开发模式，也是我们现在非常常用的一种Web项目的开发模式。

面向对象和面向过程两种编程风格，并不是非黑即白、完全对立的。面向过程编程是面向对象编程的基础，面向对象编程离不开基础的面向过程编程。不管使用面向过程还是面向对象哪种风格来写代码，我们最终的目的还是写出易维护、易读、易复用、易扩展的高质量代码。只要我们能避免面向过程编程风格的一些弊端，控制好它的副作用，在掌控范围内为我们所用，我们就大可不用避讳在面向对象编程中写面向过程风格的代码。